---
title: "Chakra-UIã®Emotionã§ç”Ÿæˆã•ã‚Œã‚‹CSSã‚’ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«å…¥ã‚Œã¦ã¿ã‚‹"
emoji: "ğŸ˜¸"
type: "tech"
topics:
  - "react"
  - "chakraui"
  - "pandacss"
published: true
published_at: "2024-10-01 22:33"
---

# ã¯ã˜ã‚ã«
æ¥­å‹™ã§ã‚ã‘ã‚ã£ã¦[Chakra-UI](https://v2.chakra-ui.com/)ã¨[Panda CSS](https://panda-css.com/)ã‚’ä½µç”¨ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚

ã‚‚ã¨ã‚‚ã¨`Panda CSS`ã‚’JSXã‚¹ã‚¿ã‚¤ãƒ«ã§ãªã„å½¢ã§æ›¸ã„ã¦ã„ãŸãŸã‚ã€JSXã‚¹ã‚¿ã‚¤ãƒ«ã«çµ±ä¸€ã™ã‚‹ã«ã‚‚ç§»è¡Œä½œæ¥­ã‚‚ãã‚Œãªã‚Šã«ç™ºç”Ÿã—ã¦ã—ã¾ã†ãŸã‚ã€ãã‚Œãªã‚‰ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§å›²ã£ã¦ã‚’å„ªå…ˆåº¦ã‚’ä¸‹ã’ã¦ã¿ã‚ˆã†ã¨ã„ã†è©¦ã¿ã«ãªã‚Šã¾ã™ã€‚

èª¿ã¹ã¦ã¿ãŸã¨ã“ã‚ä»¥ä¸‹ã®issueãŒè»¢ãŒã£ã¦ã„ãŸã®ã§ã€ãã‚Œã‚’è©¦ã—ã¦ã¿ã¾ã™ã€‚
https://github.com/emotion-js/emotion/issues/3134

# ã‚„ã£ã¦ã¿ã‚‹
:::message
æ¤œè¨¼ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦`next.js@14.2.13`ã®`app-router`ã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã¾ã™ã€‚
:::

ã‚µãƒ³ãƒ—ãƒ«ã¨ã—ã¦`Input`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’é…ç½®ã—ã¦`css`ã‚’ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚
`CacheProvider`ã¯`@chakra-ui/next-js`ã‹ã‚‰ã‚‚åˆ©ç”¨å¯èƒ½ã§ã™ãŒã€é–‹ç™ºç’°å¢ƒã§ã¯åŒã˜styleã‚¿ã‚°ãŒ2åº¦ä½œæˆã•ã‚Œè¦–èªæ€§ãŒæ‚ªã„ãŸã‚ã€ä»Šå›ã¯`@emotion/react`ã‹ã‚‰ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

```ts:provider.ts
"use client";

import { ChakraProvider } from "@chakra-ui/react";
import createCache from "@emotion/cache";
import { CacheProvider } from "@emotion/react";

import { type StylisPlugin } from "@emotion/cache";

const wrapInLayer: (layerName: string) => StylisPlugin =
  (layerName) => (node) => {
    // parentã‚’è¦‹ã¦ã„ã‚‹å ´åˆã€ç–‘ä¼¼è¦ç´ ç­‰ã®ä¸€éƒ¨ã®è¦ç´ ãŒãƒ¬ã‚¤ãƒ¤ãƒ¼ã«å›²ã‚ã‚Œãªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
    // ãã®å ´åˆã¯issueã®ã‚³ãƒ¡ãƒ³ãƒˆã§ã‚‚ã‚ã‚‹ã‚ˆã†ã«`node.root`ã‚’è¦‹ã‚‹ã‚ˆã†ã«ä¿®æ­£ã—ã¦ã¿ã¦ãã ã•ã„ã€‚
    if (node.root) return;

    const child = { ...node, parent: node, root: node };
    Object.assign(node, {
      children: [child],
      length: 6,
      parent: null,
      props: [layerName],
      return: "",
      root: null,
      type: "@layer",
      value: `@layer ${layerName}`,
    });
  };

const emotionCache = createCache({
  key: "emotion-css-cache",
  stylisPlugins: [wrapInLayer("chakra")],
});

export const Providers = ({ children }: React.PropsWithChildren) => {
  return (
    <CacheProvider value={emotionCache}>
      <ChakraProvider>{children}</ChakraProvider>
    </CacheProvider>
  );
};
```


```ts:page.ts
import { Input } from "@chakra-ui/react";
import { Providers } from "./provider";

export default function Home() {
  return (
    <Providers>
      <Input />
    </Providers>
  );
}
```

æœ€å¾Œã«ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®é †åºã‚’å…¥ã‚Œæ›¿ãˆã‚Œã°å®Œæˆã§ã™ã€‚
ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®é †åºã¯ãŠå¥½ã¿ã§è¨­å®šãã ã•ã„ã€‚

```css:global.css
@layer reset, base, chakra, tokens, recipes, utilities;
```

# å‡ºåŠ›
å‡ºåŠ›ã•ã‚ŒãŸcssã‚’ç¢ºèªã—ã¦ã¿ã‚‹ã¨ç„¡äº‹ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«å›²ã‚ã‚Œã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚
:::details å‡ºåŠ›ã•ã‚ŒãŸcss
```css
@layer chakra {
  .emotion-css-cache-1cjy4zv {
    width: 100%;
    height: var(--input-height);
    font-size: var(--input-font-size);
    padding-inline-start: var(--input-padding);
    padding-inline-end: var(--input-padding);
    border-radius: var(--input-border-radius);
    min-width: 0px;
    outline: 2px solid transparent;
    outline-offset: 2px;
    position: relative;
    appearance: none;
    transition-property: var(--chakra-transition-property-common);
    transition-duration: var(--chakra-transition-duration-normal);
    --input-font-size: var(--chakra-fontSizes-md);
    --input-padding: var(--chakra-space-4);
    --input-border-radius: var(--chakra-radii-md);
    --input-height: var(--chakra-sizes-10);
    border: 1px solid;
    border-color: inherit;
    background: inherit;
  }
}
@layer chakra {
  .emotion-css-cache-1cjy4zv:disabled,
  .emotion-css-cache-1cjy4zv[disabled],
  .emotion-css-cache-1cjy4zv[aria-disabled="true"],
  .emotion-css-cache-1cjy4zv[data-disabled] {
    opacity: 0.4;
    cursor: not-allowed;
  }
}
@layer chakra {
  .emotion-css-cache-1cjy4zv:hover,
  .emotion-css-cache-1cjy4zv[data-hover] {
    border-color: var(--chakra-colors-gray-300);
  }
}
@layer chakra {
  .emotion-css-cache-1cjy4zv[aria-readonly="true"],
  .emotion-css-cache-1cjy4zv[readonly],
  .emotion-css-cache-1cjy4zv[data-readonly] {
    box-shadow: var(--chakra-shadows-none) !important;
    user-select: all;
  }
}
@layer chakra {
  .emotion-css-cache-1cjy4zv[aria-invalid="true"],
  .emotion-css-cache-1cjy4zv[data-invalid] {
    border-color: #e53e3e;
    box-shadow: 0 0 0 1px #e53e3e;
  }
}
@layer chakra {
  .emotion-css-cache-1cjy4zv:focus-visible,
  .emotion-css-cache-1cjy4zv[data-focus-visible] {
    z-index: 1;
    border-color: #3182ce;
    box-shadow: 0 0 0 1px #3182ce;
  }
}
```
:::

# ã¾ã¨ã‚
ä»Šå›ã¯Emotionã§å‡ºåŠ›ã•ã‚Œã‚‹CSSã‚’ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«å›²ã†ã“ã¨ã§å„ªå…ˆåº¦ã‚’å¤‰æ›´ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚
å°‘ã—ç„¡ç†ã‚„ã‚Šãªæ„Ÿã˜ã§ã™ãŒã€å¿œç”¨ã§ããã†ãªç®‡æ‰€ãŒã„ãã¤ã‹ã‚ã‚‹ã®ã§ãŠå½¹ã«ç«‹ã¦ã‚Œã°ã†ã‚Œã—ã„ã§ã™ã€‚

Chakra-UIã¯v3ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç‰ˆãŒå…¬é–‹ä¸­ã§ã™ãŒã€ä»Šã®ã¨ã“ã‚v2ã¨åŒã˜å½¢å¼ã®ã‚ˆã†ã§ã™ã—ã€ä»¥ä¸‹ã®è¨˜äº‹ã«ã‚ˆã‚‹ã¨ç ´å£Šçš„å¤‰æ›´ã‚’æ¸›ã‚‰ã—ãŸã„ã¨ã®ã“ã¨ã§å¤‰ã‚ã‚‰ãªã„å¯èƒ½æ€§ãŒé«˜ã„ã‹ãªã¨æ„Ÿã˜ã¾ã™ã€‚

æ©Ÿèƒ½çš„ã«ã¯`ark-ui`ã‚’å–ã‚Šè¾¼ã‚“ã§ã‹ãªã‚Šè±Šå¯Œã«ãªã£ã¦ã„ã‚‹å°è±¡ã‚’å—ã‘ã‚‹ã®ã§ã€ãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸã‚‰ä½¿ã£ã¦ã¿ãŸã„ãªã¨æ€ã„ã¾ã—ãŸã€‚

https://www.adebayosegun.com/blog/chakra-panda-ark-whats-the-plan

https://next.chakra-ui.com